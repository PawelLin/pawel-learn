var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,l=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,i=(e,i)=>{for(var o in i||(i={}))t.call(i,o)&&l(e,o,i[o]);if(a)for(var o of a(i))s.call(i,o)&&l(e,o,i[o]);return e};import{d as o}from"./data.ce6cb38b.js";import{h as d}from"./history.a4e5b765.js";import{g as r}from"./utils.3a1ddd8d.js";import{d as n,k as c,y as f,o as u,e as h,v as p,F as m,r as I,n as A,t as E,i as y}from"./vendor.2a22cd8b.js";var R=n({setup(){const e={};o.forEach((t=>{t.forEach((t=>{e[t.name]=t}))}));const t=[];let a=0;d.forEach(((s,l)=>{let i=s.name;l||(i=s.name.split("\n").map((e=>e.trim())).join("")),s.content.includes("返场")||i.split("|").forEach((l=>{if(l){const i=l.match(/S(\d+)/);if(i){a=Number(i[1])-1;const e=s.date||s.start,[l,o,d]=e.split("-");t[a]={title:i[0],list:[{date:e,year:l,month:o,day:d,image:[]}],dates:[e]}}else{if(e[l]){const i=s.date||s.start,o=t[a].dates.indexOf(i);if(o>-1)t[a].list[o].image.push(e[l]);else{const[s,o,d]=i.split("-");t[a].list.push({date:i,year:s,month:o,day:d,image:[e[l]]}),t[a].dates.push(i)}}}}}))}));const s=c("S1"),l=c(""),n=c(null),u=[],h=[],p=c(null),m=[],I=e=>{const t=n.value.scrollTop,a=n.value.offsetHeight+t;u.forEach(((i,o)=>{const d=i.offsetTop,n=i.imageData;if(a>=d&&d>=t&&!n.isLoaded&&(i.src=r(n.icon),n.isLoaded=!0),Math.abs(t+u[0].offsetTop-d)<=10){l.value=n.year,s.value=n.title;const e=Number(n.title.replace("S",""))-1,t=p.value.scrollTop,a=p.value.offsetHeight,i=m[e].offsetTop;a+t-m[0].offsetTop<i&&(p.value.scrollTop=i-a+m[e].offsetHeight),i<t&&(p.value.scrollTop=i)}if(!e){const e=u[o-1];e&&e.imageData.title===n.title||h.push(d-u[0].offsetTop)}}))},A=(e,t)=>{s.value=t,n.value.scrollTop=h[e]};return f((()=>{I();const e=t.length-1;A(e,t[e].title)})),{getImageUrl:r,seasons:t,type:s,year:l,listRef:n,menuRef:p,handleScroll:I,handleSetScroll:A,setImageRef:(e,t,a,s)=>{e&&(e.imageData=i(i({},t),{year:a,title:s}),u.push(e))},setTabRef:e=>{e&&m.push(e)}}}});const v={class:"timi-history-mobile"},b={ref:"menuRef",class:"menu"},g=["onClick"],S={class:"contain"},T={class:"title"},j={class:"date"},k={class:"day"},F={class:"image"},J=["title"];R.render=function(e,t,a,s,l,i){return u(),h("div",v,[p("ul",b,[(u(!0),h(m,null,I(e.seasons,((t,a)=>(u(),h("li",{ref_for:!0,ref:e.setTabRef,key:t.title,onClick:s=>e.handleSetScroll(a,t.title)},[p("span",{class:A(t.title===e.type?"active":null)},E(t.title),3)],8,g)))),128))],512),p("div",S,[p("div",T,E(e.year),1),p("div",{ref:"listRef",class:"list",onScroll:t[0]||(t[0]=(...t)=>e.handleScroll&&e.handleScroll(...t))},[(u(!0),h(m,null,I(e.seasons,(t=>(u(),h("div",{class:"season",key:t.title},[(u(!0),h(m,null,I(t.list,(a=>(u(),h("div",{class:"item",key:a.date},[p("div",j,[y(E(a.month)+"月 ",1),p("p",k,E(a.day),1)]),p("div",F,[(u(!0),h(m,null,I(a.image,(s=>(u(),h("img",{ref_for:!0,ref:l=>e.setImageRef(l,s,a.year,t.title),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAeFBMVEUAAADe3t7b29vd3d3h4eHc3Nzc3NzY2Njd3d3e3t7d3d3e3t7d3d3e3t7e3t7d3d3d3d3e3t7e3t7c3Nzf39/d3d3d3d3e3t7e3t7e3t7d3d3d3d3e3t7e3t7c3Nzd3d3d3d3c3NzV1dXd3d3e3t7d3d3////d3d1Myv7IAAAAJ3RSTlMAv0DUKn5LDp63l/jx4NqnaFsyHRfpzV9E0b6wq4ZybFAmBsiRjARUwtthAAACaklEQVR42u3cCW7bMBCFYcXW7n3fHdtN8u5/wxJpWrYwJcFWY88M3neDHwJIzQBSRERERERERERERERERERERET0SHgyhjDkF4YwhCH1GMIQhtTTEfLyIN8fEj0EQxjyhSEMYQhDGMIQhtxpnibpTH3IajQEnME+0RySlfA2J7UhKf41UhpS4IrKkAmuJQpDPvoImOoLyRFSqAtZIyzRFnJE2E5bSI6wgbaQLirMdIVkqHLSFdJBlURXSIYqqa6QaIkKc2UhJcKG2k6tMcJG2kKmPQSthIXEUZMDQkph71pxt8zuuhIzWSFxFyiaHsoZ11JZ84jrcLppVC+56ihkTYiu41NvHNWbF/hbfyJrZncdvx0aD+E+/sg/ZG1RXIc3mjWdwq/5BkA3P66F7bU+O7wfnahR1snkrUy/OrzFROXu13d4icIQ1xFQXrSFuI6gItYV4joqDFNNIb7jWu9VT4jvCHrXEuI66u3nKkJqOvzdqCDEdTRbrMSH+I56ifAQ39EkFx3iO5ptz3JDwh3Vd6PUkHBH3d0oM8R13OpdYojruN0+ExfiOu6xnAoLubnDz42iQlzH3RJBIa6jhVxMiOtoZTuTEeI6WhquJYS4jtZ6YwEhvqONt6eH+I52dpf6ED2fJi1jIyFYnIyEAImVEORWQrCdGwnBoGMkBFhZCcHBSgh2VkKwORsJQT81EgIcrYSgtBKCl8xICAZTIyHAxEoIEishGFkJwXJmJAT9tZEQYGwlBG9WQlBcjIRgEBsJAcyE8CdIDAlgCEMYUo8hDGFIPbkhnSeLiIiIiIiIiIiIiIiIiIiI6L/6CTvYdrzP45VAAAAAAElFTkSuQmCC",title:s.name,key:s.name},null,8,J)))),128))])])))),128))])))),128))],544)])])},R.__scopeId="data-v-0d2b7ee6";export default R;
